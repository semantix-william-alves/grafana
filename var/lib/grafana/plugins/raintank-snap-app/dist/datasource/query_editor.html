<query-editor-row query-ctrl="ctrl" can-collapse="false">
	<div class="gf-form-inline">
		<div class="gf-form">
			<label class="gf-form-label query-keyword width-8">Task name</label>
			<metric-segment segment="ctrl.taskSegment" get-options="ctrl.getTasks()" on-change="ctrl.taskChanged()"></metric-segment>
		</div>

		<div class="gf-form max-width-25">
			<label class="gf-form-label query-keyword width-8">Interval</label>
			<input type="text" class="gf-form-input" ng-model="ctrl.target.interval" spellcheck='false' placeholder="1s" ng-blur="ctrl.intervalChanged()">
		</div>

		<div class="gf-form gf-form--grow">
			<div class="gf-form-label gf-form-label--grow"></div>
		</div>
	</div>

	<div class="gf-form-inline" ng-repeat="segment in ctrl.metricSegments">
		<div class="gf-form">
			<label class="gf-form-label query-keyword width-8">Metric</label>

			<metric-segment segment="segment" get-options="ctrl.getMetricSegments(segment, $index)" on-change="ctrl.metricSegmentChanged(segment, $index)"></metric-segment>
		</div>

		<div class="gf-form gf-form--grow">
			<div class="gf-form-label gf-form-label--grow"></div>
		</div>
	</div>

	<div class="gf-form-inline">
		<div class="gf-form">
			<label class="gf-form-label query-keyword width-8">Actions</label>

			<button ng-if="ctrl.taskNotFound" ng-click="ctrl.createTask()" class="btn btn-success btn-mini gf-form-btn">Create</button>
			<button ng-if="!ctrl.taskNotFound" ng-click="ctrl.deleteTask()" class="btn btn-danger btn-mini gf-form-btn">Delete</button>
			<button ng-if="ctrl.isRunning" ng-click="ctrl.stopTask()" class="btn btn-secondary btn-mini gf-form-btn">Stop</button>
			<button ng-if="ctrl.isStopped" ng-click="ctrl.startTask()" class="btn btn-secondary btn-mini gf-form-btn">Start</button>
			<button ng-if="ctrl.isRunning" ng-click="ctrl.watchTask()" class="btn btn-secondary btn-mini gf-form-btn">Watch</button>

			<div class="gf-form gf-form--grow">
				<div class="gf-form-label gf-form-label--grow"></div>
			</div>
		</div>
	</div>

</query-editor-row>
