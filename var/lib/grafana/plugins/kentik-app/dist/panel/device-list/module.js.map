{"version":3,"sources":["../../../src/panel/device-list/module.js"],"names":["_","PanelCtrl","loadPluginCss","dark","light","panelDefaults","fullscreen","DeviceListCtrl","$scope","$injector","$location","backendSrv","devices","pageReady","getDevices","defaults","panel","get","then","resp","device","path","search","device_name","url","id","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAOA,O;;AACCC,e,kBAAAA,S;AACAC,mB,kBAAAA,a;;;;;;;;;;;;;;;;;;;;;AAERA,oBAAc;AACZC,cAAM,wCADM;AAEZC,eAAO;AAFK,OAAd;;AAKIC,mB,GAAgB;AAClBC,oBAAY;AADM,O;;2BAIdC,c;;;AAEJ;AACA,gCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsD;AAAA;;AAAA,sIAC9CH,MAD8C,EACtCC,SADsC;;AAEpD,gBAAKC,SAAL,GAAiBA,SAAjB;AACA,gBAAKC,UAAL,GAAkBA,UAAlB;AACA,gBAAKC,OAAL,GAAe,EAAf;AACA,gBAAKC,SAAL,GAAiB,KAAjB;AACA,gBAAKC,UAAL;AACAd,YAAEe,QAAF,CAAW,MAAKC,KAAhB,EAAuBX,aAAvB;AAPoD;AAQrD;;;;uCAEY;AAAA;;AACX,iBAAKM,UAAL,CAAgBM,GAAhB,CAAoB,6CAApB,EACGC,IADH,CACQ,gBAAQ;AACZ,qBAAKN,OAAL,GAAeO,KAAKP,OAApB;AACA,qBAAKC,SAAL,GAAiB,IAAjB;AACD,aAJH;AAKD;;;oCAES;AACR,iBAAKC,UAAL;AACD;;;wCAEaM,M,EAAQ;AACpB,iBAAKV,SAAL,CAAeW,IAAf,CAAoB,kCAApB,EAAwDC,MAAxD,CAA+D,EAAC,cAAcF,OAAOG,WAAtB,EAA/D;AACD;;;2CAEgBH,M,EAAQ;AACvB,iBAAKV,SAAL,CAAec,GAAf,CAAmB,oDAAkDJ,OAAOK,EAA5E;AACD;;;;QA/B0BxB,S;;AAkC7BM,qBAAemB,WAAf,GAA6B,uDAA7B;;2BAEQnB,c","file":"module.js","sourcesContent":["import _ from 'lodash';\nimport {PanelCtrl} from 'app/plugins/sdk';\nimport {loadPluginCss} from 'app/plugins/sdk';\n\nloadPluginCss({\n  dark: 'plugins/kentik-app/css/kentik.dark.css',\n  light: 'plugins/kentik-app/css/kentik.light.css'\n});\n\nvar panelDefaults = {\n  fullscreen: true\n};\n\nclass DeviceListCtrl extends PanelCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, backendSrv) {\n    super($scope, $injector);\n    this.$location = $location;\n    this.backendSrv = backendSrv;\n    this.devices = [];\n    this.pageReady = false;\n    this.getDevices();\n    _.defaults(this.panel, panelDefaults);\n  }\n\n  getDevices() {\n    this.backendSrv.get(\"/api/plugin-proxy/kentik-app/api/v5/devices\")\n      .then(resp => {\n        this.devices = resp.devices;\n        this.pageReady = true;\n      });\n  }\n\n  refresh() {\n    this.getDevices();\n  }\n\n  gotoDashboard(device) {\n    this.$location.path(\"/dashboard/db/kentik-top-talkers\").search({\"var-device\": device.device_name});\n  }\n\n  gotoDeviceDetail(device) {\n    this.$location.url(\"/plugins/kentik-app/page/device-details?device=\"+device.id);\n  }\n}\n\nDeviceListCtrl.templateUrl = 'public/plugins/kentik-app/components/device_list.html';\n\nexport {DeviceListCtrl as PanelCtrl};\n"]}